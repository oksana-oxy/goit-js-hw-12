{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios'\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nexport default function searchImagesByQuery(query, page, perPage) {\n        const axiosOptions = {\n    params: {\n      key: '45706921-daf09135eb1f07c679e77f1a2',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n      safesearch: true,\n      page: page,\n    per_page: perPage,\n    }\n  }\n\n  return axios.get(\n    '', axiosOptions\n  )\n//     .then(response => {\n//       if (!response.ok) {\n//         throw new Error(response.status);\n//       }\n//       return response.json();\n//     })\n//     .catch(error => {\n//       iziToast.error({\n//         position: 'topRight',\n//         message: `${error}`,\n//       });\n//     });\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\nexport function createImages(response) {\n  \n  const list = document.querySelector('.gallery');\n  let images = response.data.hits\n    .map(\n        hit =>\n            `<li class=\"gallery-card\">\n  <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n    <img\n      class=\"gallery-img\"\n      src=\"${hit.webformatURL}\"\n      data-source=\"${hit.largeImageURL}\"\n      alt=\"${hit.tags}\"\n    />\n  </a>\n  <div class=\"wrapper\">\n    <ul class=\"img-content-wrapper\">\n      <li class=\"text-info\">\n        Likes<span class=\"number\">${hit.likes}</span>\n      </li>\n      <li class=\"text-info\">\n        Views<span class=\"number\">${hit.views}</span>\n      </li>\n      <li class=\"text-info\">\n        Comments<span class=\"number\">${hit.comments}</span>\n      </li>\n      <li class=\"text-info\">\n        Downloads<span class=\"number\">${hit.downloads}</span>\n      </li>\n    </ul>\n  </div>\n</li>    `\n    //   `<div class=\"image-frame\"><a href=\"${hit.largeImageURL}\"><img class=\"image\" src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" /></a><div class =\"text-wraper\"><div class=\"text-block\"><h5>likes</h5><p>${hit.likes}</p></div><div class=\"text-block\"><h5>views</h5><p>${hit.views}</p></div><div class=\"text-block\"><h5>comments</h5><p>${hit.comments}</p></div><div class=\"text-block\"><h5>downloads</h5><p>${hit.downloads}</p></div></div></div>`\n    )\n    .join('');\n    //   list.insertAdjacentHTML('afterbegin', images);\n    list.insertAdjacentHTML(\"beforeend\", images);\n  lightbox.refresh();\n}\n\nexport function clearImages() {\n  const list = document.querySelector('.gallery');\n  list.innerHTML = '';\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport searchImagesByQuery from './js/pixabay-api';\nimport { createImages, clearImages } from './js/render-functions';\n\n\nconst form = document.querySelector('.gallery-form');\nconst input = document.querySelector('.input-for-gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreEl = document.querySelector('.load-more-btn');\n\nlet currentPage = 1;\nlet wordForSearch = '';\nconst perPage = 15;\n\n// function smoothScroll() \n//   const { height: cardHeight } = document\n//     .querySelector('.gallery-img')\n//     .firstElementChild.getBoundingClientRect();\n//   window.scrollBy({\n//     top: cardHeight * 2,\n//     behavior: 'smooth',\n//   });\n// smoothScroll();\nconst handleSubmit = async event => {\n  try {\n    event.preventDefault();\n    clearImages();\n    loader.classList.remove('hidden');\n    loadMoreEl.classList.add('hidden');\n    wordForSearch = input.value.trim();\n    if (wordForSearch === '') {\n      iziToast.error({\n        position: 'topRight',\n        message: 'Please fill the input',\n      });\n      loader.classList.add('hidden');\n      return;\n    }\n    \n    const response = await searchImagesByQuery(wordForSearch, currentPage, perPage);\n\n        if (response.data.hits.length === 0) {\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n          loader.classList.add('hidden');\n          \n      return;\n        }\n    if (response.data.totalHits <= perPage) {\n            createImages(response);\n      iziToast.info({\n      message: 'We`re sorry, but you`ve reached the end of search results.',\n      position: 'bottomRight',\n      });\n      loader.classList.add('hidden');\n      return;\n    }\n        else {\n      loader.classList.add('hidden');\n      createImages(response);\n      loadMoreEl.classList.remove('hidden');\n smoothScroll();\n      \n          }\n      } catch (err) {\n    console.log(err);\n    iziToast.error({\n      message: 'An error occurred. Please try again later.',\n      position: 'bottomRight',\n    });\n  } finally {\n    loader.classList.add('hidden');\n    input.value = '';\n  }\n\n  }\n\nform.addEventListener('submit', handleSubmit);\n\nconst onLoadBtnClick = async event => {\n  try {\n    currentPage++;\n    loader.classList.remove('hidden');\n    const response = await searchImagesByQuery(wordForSearch, currentPage, perPage);\n    const data = response.data; \n\n    if (Math.ceil(data.totalHits / perPage) === currentPage) {\n      loadMoreEl.classList.add('hidden'); \n      loader.classList.add('hidden');\n      iziToast.info({\n      message: 'We`re sorry, but you`ve reached the end of search results.',\n      position: 'bottomRight',\n    });\n      return;\n    }\n\n      createImages(response);\n    loadMoreEl.classList.remove('hidden');\n    loader.classList.add('hidden');\n    smoothScroll();\n\n  } catch (err) {\n    console.log(err);\n}\n};\n\nloadMoreEl.addEventListener('click', onLoadBtnClick);\nfunction smoothScroll() {\n    const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n"],"names":["axios","searchImagesByQuery","query","page","perPage","axiosOptions","lightbox","SimpleLightbox","createImages","response","list","images","hit","clearImages","form","input","loader","loadMoreEl","currentPage","wordForSearch","handleSubmit","event","iziToast","smoothScroll","err","onLoadBtnClick","data","cardHeight"],"mappings":"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"}